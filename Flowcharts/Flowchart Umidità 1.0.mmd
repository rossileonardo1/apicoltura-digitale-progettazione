---
config:
  theme: redux
  layout: fixed
---
flowchart TB
    A(["Startup"]) --> n1["Lett soglia max,min<br>Tipo di dato:float,not null"]
    n5["Presa campione<br>Tipo di dato:float,not null"] --> n6["campione != errore"]
    n6 -- Vero --> n7["Se campione &lt; soglia max"]
    n7 -- Vero --> n8["campione &gt; Soglia min"]
    n7 -- Falso --> n9["Invio Alert a DB"]
    n8 -- Falso --> n10["Invio Alert a DB"]
    n1 --> n14["contatore = 0"]
    n14 --> n13["Contatore != 5"]
    n13 -- Vero --> n4["Lett soglia tempo (umidit√†)<br>TimeStamp,not null"]
    n13 -- Falso --> n1
    n4 --> n15["cont= cont+1"]
    n15 --> n5
    n10 --> n16["Delay 6 minuti"]
    n8 -- Vero --> n16
    n9 --> n16
    n12["Invio Alert a DB"] --> n16
    n16 --> n13
    n6 -- Falso --> n17["Salva campione e timestamp su ESP32"]
    n17 --> n12

    n1@{ shape: proc}
    n5@{ shape: proc}
    n6@{ shape: decision}
    n7@{ shape: decision}
    n8@{ shape: decision}
    n9@{ shape: proc}
    n10@{ shape: proc}
    n14@{ shape: proc}
    n13@{ shape: loop-limit}
    n4@{ shape: proc}
    n15@{ shape: proc}
    n16@{ shape: delay}
    n12@{ shape: proc}
    n17@{ shape: proc}